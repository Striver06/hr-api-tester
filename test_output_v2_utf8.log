============================= test session starts =============================
platform win32 -- Python 3.12.2, pytest-8.0.2, pluggy-1.4.0 -- C:\Users\dheer\AppData\Local\Programs\Python\Python312\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\dheer\Desktop\hr_api_tester
configfile: pytest.ini
testpaths: tests
collecting ... collected 5 items

tests/test_attendance.py::test_attendance_list PASSED                    [ 20%]
tests/test_auth.py::test_login PASSED                                    [ 40%]
tests/test_employees.py::test_create_employee FAILED                     [ 60%]
tests/test_payroll.py::test_run_payroll FAILED                           [ 80%]
tests/test_rag.py::test_rag_query FAILED                                 [100%]

================================== FAILURES ===================================
____________________________ test_create_employee _____________________________
tests\test_employees.py:7: in test_create_employee
    assert res.status_code == 201
E   assert 500 == 201
E    +  where 500 = <Response [500]>.status_code
______________________________ test_run_payroll _______________________________
tests\test_payroll.py:3: in test_run_payroll
    assert res.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404]>.status_code
_______________________________ test_rag_query ________________________________
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py:198: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py:793: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py:496: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py:400: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python312\Lib\http\client.py:1326: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python312\Lib\http\client.py:1085: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python312\Lib\http\client.py:1029: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py:238: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py:213: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x000002C4843B3DD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py:847: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\retry.py:515: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /query (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000002C4843B3DD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))

During handling of the above exception, another exception occurred:
tests\test_rag.py:2: in test_rag_query
    res = rag_client.request(
core\client.py:20: in request
    return requests.request(
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /query (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000002C4843B3DD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))
=========================== short test summary info ===========================
FAILED tests/test_employees.py::test_create_employee - assert 500 == 201
FAILED tests/test_payroll.py::test_run_payroll - assert 404 == 200
FAILED tests/test_rag.py::test_rag_query - requests.exceptions.ConnectionErro...
========================= 3 failed, 2 passed in 4.62s =========================
